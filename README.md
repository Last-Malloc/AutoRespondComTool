[csdn文章地址](https://blog.csdn.net/qq_42283621/article/details/119088679)

[github代码](https://github.com/Last-Malloc/AutoRespondComTool)

# 项目来源

最近实习，在用C++和Qt做开发，任务是重构一个打码机的PC端控制程序，与打印机ARM芯片上的程序以字节数据进行交互。在开发的过程中发现，发现给出的协议文档（即帧数据指定位对应的含义）和打码机上实际跑的程序有一些出入，所以在学习协议的过程中，使用了下图所示的串口工具，通过实际的输入输出来确定协议的变动情况。**下图的工具也同时放到了项目的“第三方串口工具”文件夹下**。并且，在有时候的开发过程中，不一定时时都有机器可以实际的使用和调试，所以为了迎合开发的需要，参照下图的串口工具，开发了**自动回复串口工具**，能够在软件中指定收到某个帧数据时的回复帧数据序列，软件的布局、原理均相对简单，使用C#进行的快速开发，后续存在的问题会继续完善，旨在能够帮助有需要的coder们省一点点时间。图2为本软件界面图。

![image-20210725203024196](https://img-blog.csdnimg.cn/img_convert/e23cc1a470f8a2fd3f3980df5fc3b80e.png)

![image-20210725214424174](https://img-blog.csdnimg.cn/img_convert/5d48bd8a34e5a1a0a309162ff80e2819.png)

# 键-值数据

1. 键和值只能是16进制字符（包括大小写）或空格，非法字符自动删除，可选择是否对非法字符进行提示
2. 1个键对应0-n个值
3. 添加键 添加值 删除键 删除值
4. 复制键 复制值 为复制选中条目的16进制字符，其他字符忽略
5. 键-值数据和系统配置保存到key_value.txt中，以###为分隔符，删除该文件系统恢复默认设置
6. 自动回复模式下，收到的数据与某一个键匹配时，依次回复其对应的所有值。

# 客户端和服务器

1. 客户端和服务器不可同时开启

2. HEX显示将收到的字节以16进制字符串形式显示，例如0x41 0x42 显示“41 42”

   字符显示将收到的字节以ASCII字符形式显示，例如0x41 0x42 显示“AB”

3. 自动回复即收到的数据与某一个键匹配时，依次回复其对应的所有值。回复延迟为回复每条数据前的延迟时间。

4. 发送数据只能是16进制字符（包括大小写）或空格，非法字符自动删除，可选择是否对非法字符进行提示

5. 服务器模式下，对已连接的客户端IP:Port数据进行记录，并添加到combobox中（发送按钮上方）

6. 复制HEX为复制信息交互窗口中选中条目的16进制字符，其他字符忽略。

7. 清空窗口为清空信息交互窗口

8. 信息交互窗口中，显示 客户端开启/关闭信息、设备连接到客户端信息、设备从客户端断开信息、连接到其他服务器信息、从其他服务器断开信息、收到帧数据信息、回复帧数据信息。

